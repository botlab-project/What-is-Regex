# What-is-Regex
آموزش و نحوه استفاده از Regex در ربات های تلگرامی با BotLab


# راهنمای عملی Regex در PHP برای اعتبارسنجی ورودی کاربران

این راهنما مخصوص سازنده‌های ربات تلگرام است که می‌خواهند **ورودی کاربران را فقط به صورت درست / غلط (true / false)** بررسی کنند.

در این سیستم:

* هیچ پردازش پیچیده‌ای انجام نمی‌شود
* Regex فقط داخل شرط `if` استفاده می‌شود
* خروجی همیشه یک نتیجه منطقی است

---

## Regex چیست و چرا در ربات تلگرام مهم است؟

Regex (Regular Expression) یک زبان الگو‌نویسی برای بررسی متن است.

در ربات تلگرام معمولاً نیاز داریم بررسی کنیم:

* ورودی با عدد شروع شده؟
* کاربر نام و نام خانوادگی وارد کرده؟
* تعداد کلمات بیشتر از یک است؟
* متن فقط عدد است یا فقط حروف؟

Regex این کارها را **سریع، امن و قابل کنترل** انجام می‌دهد.

---

## تابع اصلی در PHP

```php
preg_match($pattern, $text);
```

خروجی:

* `1` → الگو با متن تطابق دارد (true)
* `0` → تطابق ندارد (false)

استفاده استاندارد در شرط:

```php
if (preg_match($pattern, $text)) {
    // ورودی معتبر است
}
```

یا به صورت منطقی:

```php
$isValid = (bool) preg_match($pattern, $text);
```

---

## درس ۱: بررسی اینکه متن با عدد شروع شده

### سناریو

کاربر باید آیدی عددی یا کدی وارد کند که با عدد شروع می‌شود.

### Regex

```regex
^\d
```

### PHP

```php
if (preg_match('/^\d/', $text)) {
    // درست
} else {
    // غلط
}
```

---

## درس ۲: بررسی اینکه ورودی فقط عدد است

### سناریو

کاربر باید شماره، کد یا مقدار عددی وارد کند.

### Regex

```regex
^\d+$
```

### PHP

```php
if (preg_match('/^\d+$/', $text)) {
    // فقط عدد
}
```

---

## درس ۳: بررسی اینکه متن حداقل دو کلمه دارد

### سناریو

کاربر باید نام و نام خانوادگی وارد کند.

### Regex

```regex
^\S+\s+\S+
```

### PHP

```php
if (preg_match('/^\S+\s+\S+/', $text)) {
    // حداقل دو کلمه
}
```

---

## درس ۴: بررسی اینکه متن بیشتر از ۲ کلمه است (۳ کلمه یا بیشتر)

### Regex

```regex
^(\S+\s+){2,}\S+
```

### PHP

```php
if (preg_match('/^(\S+\s+){2,}\S+/', $text)) {
    // سه کلمه یا بیشتر
}
```

---

## پروژه ۱: بررسی وجود نام خانوادگی در متن

### هدف

بررسی کنیم کاربر **نام و نام خانوادگی** وارد کرده یا نه.

### شرط منطقی

* متن باید بیشتر از یک کلمه باشد

### Regex نهایی

```regex
^\S+\s+\S+
```

### PHP

```php
$isFullName = (bool) preg_match('/^\S+\s+\S+/', $text);
```

اگر `true` بود → نام خانوادگی وارد شده است

---

## پروژه ۲: جلوگیری از ورودی تک‌کلمه‌ای

### سناریو

ربات نباید پیام‌های تک‌کلمه‌ای را قبول کند.

### PHP

```php
if (!preg_match('/^\S+$/', $text)) {
    // بیشتر از یک کلمه
}
```

---

## پروژه ۳: بررسی شروع متن با حرف (نه عدد)

### Regex

```regex
^[a-zA-Zآ-ی]
```

### PHP

```php
if (preg_match('/^[a-zA-Zآ-ی]/u', $text)) {
    // شروع با حرف
}
```

---

## الگوهای پرکاربرد برای سازنده‌های ربات

```php
/^\d/           // شروع با عدد
/^\d+$/         // فقط عدد
/^\S+$/         // فقط یک کلمه
/\s/            // دارای فاصله
/^\S+\s+\S+/   // حداقل دو کلمه
```

---

## معماری پیشنهادی برای ربات تلگرام

```php
function validate($pattern, $text): bool {
    return (bool) preg_match($pattern, $text);
}
```

استفاده:

```php
if (validate('/^\S+\s+\S+/', $text)) {
    // ورودی معتبر
}
```

---

## نکته‌های حرفه‌ای

* Regex فقط برای بررسی شرط استفاده شود، نه پردازش منطق
* الگوها را ساده و خوانا بنویسید
* همیشه خروجی را به `bool` تبدیل کنید
* از Regex برای امنیت ورودی استفاده کنید

---

## جمع‌بندی

Regex در PHP یک ابزار قدرتمند برای سازنده‌های ربات تلگرام است تا:

* ورودی کاربران را کنترل کنند
* خطاها را کاهش دهند
* منطق ربات را تمیز و قابل توسعه نگه دارند

این راهنما به‌گونه‌ای نوشته شده که مستقیماً قابل استفاده در فایل **README.md** باشد.

---

## فهرست مطالب (Table of Contents)

1. مقدمه
2. Regex چیست و کاربرد آن در ربات تلگرام
3. ساختار Regex در PHP
4. قوانین پایه الگوها
5. درس‌های آموزشی (Step by Step)
6. پروژه‌های واقعی ربات تلگرام
7. ترکیب چند شرط در Regex
8. معماری پیشنهادی اعتبارسنجی
9. مدیریت خطا و پیام به کاربر
10. بهترین تمرین‌ها (Best Practices)

---

## قوانین پایه Regex (سریع و کاربردی)

| الگو   | توضیح        |
| ------ | ------------ |
| `^`    | شروع متن     |
| `$`    | پایان متن    |
| `.`    | هر کاراکتر   |
| `\d`   | عدد          |
| `\D`   | غیر عدد      |
| `\w`   | حرف یا عدد   |
| `\s`   | فاصله        |
| `+`    | یک یا بیشتر  |
| `*`    | صفر یا بیشتر |
| `{n,}` | حداقل n بار  |

---

## درس ۵: بررسی حداقل طول متن

### سناریو

ورودی کاربر باید حداقل ۵ کاراکتر داشته باشد.

### Regex

```regex
^.{5,}$
```

### PHP

```php
if (preg_match('/^.{5,}$/u', $text)) {
    // طول معتبر
}
```

---

## درس ۶: بررسی نام کامل فارسی (نام + نام خانوادگی)

### شرط‌ها

* فقط حروف فارسی
* حداقل دو کلمه

### Regex

```regex
^[آ-ی]+\s+[آ-ی]+
```

### PHP

```php
if (preg_match('/^[آ-ی]+\s+[آ-ی]+/u', $text)) {
    // نام کامل فارسی
}
```

---

## پروژه ۴: اعتبارسنجی مرحله‌ای (Wizard Input)

### سناریو

ربات در چند مرحله از کاربر اطلاعات می‌گیرد.

```php
switch ($step) {
    case 'fullname':
        $valid = preg_match('/^\S+\s+\S+/', $text);
        break;
    case 'age':
        $valid = preg_match('/^\d{1,3}$/', $text);
        break;
}
```

---

## پروژه ۵: ترکیب چند شرط در یک Regex

### سناریو

ورودی باید:

* با حرف شروع شود
* حداقل ۲ کلمه باشد
* عدد نداشته باشد

### Regex

```regex
^[A-Za-zآ-ی]+\s+[A-Za-zآ-ی]+
```

### PHP

```php
$isValid = (bool) preg_match('/^[A-Za-zآ-ی]+\s+[A-Za-zآ-ی]+/u', $text);
```

---

## معماری حرفه‌ای اعتبارسنجی

```php
class Validator {
    public static function check(string $pattern, string $text): bool {
        return (bool) preg_match($pattern, $text);
    }
}
```

### استفاده

```php
if (Validator::check('/^\S+\s+\S+/', $text)) {
    // ok
}
```

---

## مدیریت پیام خطا برای کاربر

```php
if (!Validator::check('/^\S+\s+\S+/', $text)) {
    $bot->sendMessage('لطفاً نام و نام خانوادگی را وارد کنید');
}
```

---

## Best Practices

* Regex فقط برای validation استفاده شود
* الگوها را در یک فایل جدا نگه دارید
* از modifier `u` برای فارسی استفاده کنید
* از Regexهای بیش از حد پیچیده پرهیز کنید
* همیشه خروجی را boolean کنید

---

## نتیجه نهایی

این README یک مرجع کامل برای سازنده‌های ربات تلگرام است تا بتوانند:

* ورودی کاربران را کنترل کنند
* رفتار ربات را قابل پیش‌بینی کنند
* سیستم اعتبارسنجی حرفه‌ای بسازند

قابل استفاده مستقیم در مخزن GitHub
